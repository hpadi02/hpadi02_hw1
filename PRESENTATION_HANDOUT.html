<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HPAD I/O Homework 1: Network Chat Application</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            color: #333;
        }
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }
        h2 {
            color: #34495e;
            border-bottom: 1px solid #bdc3c7;
            padding-bottom: 5px;
            margin-top: 30px;
        }
        h3 {
            color: #2980b9;
            margin-top: 25px;
        }
        code {
            background-color: #f8f9fa;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.9em;
        }
        pre {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #3498db;
            overflow-x: auto;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
        }
        .checkmark {
            color: #27ae60;
            font-weight: bold;
        }
        .highlight {
            background-color: #fff3cd;
            padding: 10px;
            border-radius: 5px;
            border-left: 4px solid #ffc107;
        }
        ul, ol {
            padding-left: 20px;
        }
        li {
            margin-bottom: 5px;
        }
        .demo-section {
            background-color: #e8f5e8;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #27ae60;
        }
        .questions-section {
            background-color: #f0f8ff;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #3498db;
        }
        @media print {
            body { font-size: 12px; }
            h1 { page-break-before: avoid; }
            h2 { page-break-after: avoid; }
        }
    </style>
</head>
<body>
    <h1>HPAD I/O Homework 1: Network Chat Application</h1>
    <h2>Project Overview & Demo Guide</h2>

    <h2>What This Project Is</h2>
    <p>A minimal TCP chat application demonstrating socket programming, event-driven I/O, and cross-platform terminal handling.</p>
    
    <p><strong>Components:</strong></p>
    <ul>
        <li><code>chat_server.py</code>: TCP server that accepts one client connection</li>
        <li><code>chat_client.py</code>: TCP client that connects to the server</li>
        <li>Real-time, per-character communication in both directions</li>
    </ul>

    <h2>Key Features We Built</h2>
    
    <h3><span class="checkmark">✅</span> Core Functionality</h3>
    <ul>
        <li><strong>Single-client TCP chat</strong> over network sockets</li>
        <li><strong>Real-time per-character echo</strong> (no waiting for Enter key)</li>
        <li><strong>Cross-platform support</strong> (macOS, Linux, Windows)</li>
        <li><strong>Clean disconnect handling</strong> and port conflict management</li>
        <li><strong>UTF-8 text transport</strong> with proper encoding</li>
    </ul>

    <h3><span class="checkmark">✅</span> Technical Implementation</h3>
    <ul>
        <li><strong>Event-driven I/O</strong> using Python's <code>selectors</code> module</li>
        <li><strong>Non-blocking sockets</strong> for responsive communication</li>
        <li><strong>Raw terminal mode</strong> on Unix systems for immediate keystroke capture</li>
        <li><strong>Background threads</strong> on Windows for stdin handling</li>
        <li><strong>Network binding</strong> to <code>0.0.0.0</code> for LAN connectivity</li>
    </ul>

    <h2>How It Works (Architecture)</h2>

    <h3>Server (<code>chat_server.py</code>)</h3>
    <pre>1. Creates non-blocking TCP socket on specified port
2. Uses selectors to monitor:
   - Server socket (for new client connections)
   - Client socket (for incoming data)
   - stdin (Unix only, in raw mode for per-character input)
3. Forwards keystrokes immediately to connected client
4. Prints received data directly to stdout</pre>

    <h3>Client (<code>chat_client.py</code>)</h3>
    <pre>1. Connects to server IP:port
2. Uses selectors to monitor:
   - Server socket (for incoming data)
   - stdin (Unix only, in raw mode)
3. Sends each keystroke immediately to server
4. Displays received bytes instantly (no line buffering)</pre>

    <h3>Cross-Platform Handling</h3>
    <ul>
        <li><strong>Unix/macOS</strong>: <code>termios</code> + <code>tty</code> for raw terminal mode</li>
        <li><strong>Windows</strong>: <code>msvcrt.getch()</code> in background thread</li>
        <li><strong>Both</strong>: <code>selectors</code> for efficient I/O multiplexing</li>
    </ul>

    <div class="demo-section">
        <h2>Demo Instructions</h2>

        <h3>Same Machine Demo</h3>
        <pre># Terminal A (Server)
python3 chat_server.py 5050

# Terminal B (Client)  
python3 chat_client.py 127.0.0.1 5050</pre>

        <h3>Two Computer Demo</h3>
        <pre># On Server Computer
# 1. Find IP: ipconfig getifaddr en0 (macOS) or ipconfig (Windows)
# 2. Start server:
python3 chat_server.py 5050

# On Client Computer
python3 chat_client.py &lt;SERVER_IP&gt; 5050</pre>

        <h3>Demo Script</h3>
        <ol>
            <li><strong>Start both programs</strong> - show connection messages</li>
            <li><strong>Type on client</strong> - characters appear instantly on server</li>
            <li><strong>Type on server</strong> - characters appear instantly on client</li>
            <li><strong>Disconnect client</strong> (Ctrl+C) - server logs disconnect</li>
            <li><strong>Reconnect</strong> - show server accepts new client</li>
        </ol>
    </div>

    <h2>Technical Challenges Solved</h2>

    <h3>Per-Character Transmission</h3>
    <ul>
        <li><strong>Problem</strong>: Terminals normally buffer input until Enter</li>
        <li><strong>Solution</strong>: Raw terminal mode disables line buffering and local echo</li>
        <li><strong>Implementation</strong>: <code>tty.setraw()</code> on Unix, <code>msvcrt.getch()</code> on Windows</li>
    </ul>

    <h3>Cross-Platform stdin Handling</h3>
    <ul>
        <li><strong>Problem</strong>: <code>selectors</code> can't monitor stdin on Windows</li>
        <li><strong>Solution</strong>: Background thread reads keystrokes on Windows</li>
        <li><strong>Result</strong>: Consistent behavior across all platforms</li>
    </ul>

    <h3>TCP Stream Handling</h3>
    <ul>
        <li><strong>Problem</strong>: TCP data can arrive fragmented or coalesced</li>
        <li><strong>Solution</strong>: Write received bytes directly to stdout (no line buffering)</li>
        <li><strong>Benefit</strong>: True real-time character display</li>
    </ul>

    <h2>Assignment Compliance</h2>

    <h3><span class="checkmark">✅</span> Requirements Met</h3>
    <ul>
        <li><strong>Two programs</strong>: <code>chat_server.py</code> and <code>chat_client.py</code></li>
        <li><strong>Network communication</strong>: TCP sockets</li>
        <li><strong>Command line interface</strong>: <code>python3 chat_server.py PORT</code> and <code>python3 chat_client.py IP PORT</code></li>
        <li><strong>Real-time chat</strong>: Per-character transmission (advanced requirement)</li>
        <li><strong>Cross-platform</strong>: Works on macOS, Linux, Windows</li>
    </ul>

    <h3><span class="checkmark">✅</span> Code Quality</h3>
    <ul>
        <li><strong>Standard library only</strong>: No external dependencies</li>
        <li><strong>Error handling</strong>: Port conflicts, disconnections, encoding issues</li>
        <li><strong>Clean shutdown</strong>: Proper socket cleanup and terminal restoration</li>
        <li><strong>Documentation</strong>: Clear comments and usage instructions</li>
    </ul>

    <div class="questions-section">
        <h2>Questions to Ask Other Teams</h2>

        <h3>Architecture & Design</h3>
        <ul>
            <li>How did you handle cross-platform stdin reading? Why <code>selectors</code> vs threads?</li>
            <li>How do you ensure per-character transmission instead of line-buffered input?</li>
            <li>Did you consider backpressure or partial writes on sockets?</li>
        </ul>

        <h3>Robustness & Error Handling</h3>
        <ul>
            <li>How does your server detect client disconnects or <code>ConnectionResetError</code>?</li>
            <li>What happens if the listen port is already in use?</li>
            <li>How do you recover terminal state if the program crashes in raw mode?</li>
        </ul>

        <h3>Protocol & Data Handling</h3>
        <ul>
            <li>Did you choose UTF-8 text protocol? How do you handle multi-byte characters?</li>
            <li>Do you normalize line endings (LF vs CRLF) or send raw bytes?</li>
            <li>How do you handle TCP stream fragmentation?</li>
        </ul>

        <h3>Extensions & Future Work</h3>
        <ul>
            <li>If you added multi-client support, how did you handle broadcasting?</li>
            <li>What would you change to add TLS encryption or authentication?</li>
            <li>How would you structure code for pluggable transports?</li>
        </ul>
    </div>

    <h2>Known Limitations</h2>
    <ul>
        <li><strong>Single client only</strong> (by design for this assignment)</li>
        <li><strong>No authentication or encryption</strong> (plain TCP)</li>
        <li><strong>No backspace handling</strong> on remote end (raw bytes forwarded)</li>
        <li><strong>No message history</strong> or persistent storage</li>
    </ul>

    <h2>Files in Project</h2>
    <ul>
        <li><code>chat_server.py</code> (229 lines) - TCP server with per-character input</li>
        <li><code>chat_client.py</code> (194 lines) - TCP client with real-time display</li>
        <li><code>README.md</code> - Setup and usage instructions</li>
        <li><code>PRESENTATION_HANDOUT.html</code> - This document</li>
    </ul>
    
    <p><strong>Total</strong>: ~400 lines of clean, documented Python code using only standard library.</p>
</body>
</html>
